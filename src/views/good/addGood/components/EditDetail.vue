<template>
  <div>
    <vue-ueditor-wrap v-model="msg" :config="myConfig" @ready="ready"></vue-ueditor-wrap>
    <a-button @click="handleUpdateGoodDesc">保存</a-button>
  </div>
</template>

<script>
import VueUeditorWrap from "vue-ueditor-wrap"; // ES6 Module
import { mixinAddGoodState } from "../mixin";
import {
  updateGoodDesc
} from "@/api/addGood";
export default {
  components: {
    VueUeditorWrap
  },
  mixins: [mixinAddGoodState],
  data() {
    return {
      msg:
        '<p style="margin-top: 15px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501936816115712.jpg" title="1501936816115712.jpg" alt="二人 新.jpg"/></p><p style="margin-top: 20px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501921820509281.jpg" title="1501921820509281.jpg" alt="1.jpg"/></p><p style="margin-top: -20px; white-space: normal;"><span style="font-size: 15px; font-weight: bold; color: rgb(146, 146, 146); font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">&nbsp; &nbsp; &nbsp; &nbsp; 预定须知</span></p><p style="margin-top: 13px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">1、本产品因每日房间数量有限，请在下单后30分钟之内进行确认付款，否则因订单过期而造成不能付款的将自动取消此订单。</span><br/></p><p style="margin-top: 8px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">2、关于购买：您的订单需要在支付时限内支付全款，超出时限的支付将被视为无效支付，如无问题将向您发送确认购买成功的订单。</span><br/></p><p style="margin-top: 8px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">3、根据国家相关法律法规，若因人力不可抗拒的因素而造成对行程的影响，御温泉将协助您进行解决，但不承担相应责任， 若因此而增加的费用，需您自己承担。</span><br/></p><p style="margin-top: 15px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501928946255694.png" title="1501928946255694.png" alt="分隔线.png"/></span></p><p style="margin-top: 20px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501927196106026.jpg" title="1501927196106026.jpg" alt="2.jpg"/></p><p style="margin-top: -22px; white-space: normal;"><span style="font-size: 15px; font-weight: bold; color: rgb(146, 146, 146); font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">&nbsp; &nbsp; &nbsp; &nbsp; 入住说明</span></p><p style="margin-top: 20px; white-space: normal;"><span style="font-size: 13px; color: rgb(153, 153, 153);">接待时间：</span><span style="font-size: 13px; color: rgb(119, 119, 119);">全天</span></p><p style="margin-top: -19px; margin-left: 184px; white-space: normal;"><span style="font-size: 13px; color: rgb(153, 153, 153);">被单更换：</span><span style="font-size: 13px; color: rgb(119, 119, 119);">每客一换</span></p><p style="margin-top: 10px; white-space: normal;"><span style="font-size: 13px; color: rgb(153, 153, 153);">入住时间：</span><span style="font-size: 13px; color: rgb(119, 119, 119);">15:00后</span></p><p style="margin-top: -19px; margin-left: 184px; white-space: normal;"><span style="font-size: 13px; color: rgb(153, 153, 153);">退房时间：</span><span style="font-size: 13px; color: rgb(119, 119, 119);">13:00前</span></p><p style="margin-top: 10px; white-space: normal;"><span style="font-size: 13px; color: rgb(153, 153, 153);">最少入住：</span><span style="font-size: 13px; color: rgb(119, 119, 119);">1天</span></p><p style="margin-top: -19px; margin-left: 184px; white-space: normal;"><span style="font-size: 13px; color: rgb(153, 153, 153);">最多入住：</span><span style="font-size: 13px; color: rgb(119, 119, 119);">天数不限</span></p><p style="margin-top: 10px; white-space: normal;"><span style="font-size: 13px; color: rgb(153, 153, 153);">外宾接待：</span><span style="font-size: 13px; color: rgb(119, 119, 119);">接待</span></p><p style="margin-top: -19px; margin-left: 184px; white-space: normal;"><span style="font-size: 13px; color: rgb(153, 153, 153);">发票：&nbsp;</span><span style="font-size: 13px; color: rgb(119, 119, 119);">支持开发票</span></p><p style="margin-top: 10px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(153, 153, 153);">入住证件：</span><span style="font-size: 13px; color: rgb(119, 119, 119);">需一人一证办理入住（身份证、护照、港澳通行证、驾驶证任选其一）</span></p><p style="margin-top: 15px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501928946255694.png" title="1501928946255694.png" alt="分隔线.png"/></span></p><p style="margin-top: 20px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501935698384144.jpg" title="1501935698384144.jpg" alt="3.jpg"/></p><p style="margin-top: -22px; white-space: normal;"><span style="font-size: 15px; font-weight: bold; color: rgb(146, 146, 146); font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">&nbsp; &nbsp; &nbsp; &nbsp; 特殊限制</span></p><p style="margin-top: 18px; white-space: normal; line-height: 1.5em;"><span style="color: rgb(119, 119, 119); font-size: 12px;">●&nbsp;</span><span style="font-size: 13px; color: rgb(119, 119, 119);">病患者、孕妇及行动不便者：</span><br/></p><p style="margin-top: 2px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">1. 为了确保旅游顺利出行，防止旅途中发生人身意外伤害事故，请旅游者在出行前做一次必要的身体检查，如存在下列情况，因服务能力所限无法接待：</span><br/></p><p style="white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">（1）传染性疾病患者，如传染性肝炎、活动期肺结核、伤寒等传染病人；</span><br/></p><p style="white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">（2）心血管疾病患者，如严重高血压、心功能不全、心肌缺氧、心肌梗塞等病人；</span><br/></p><p style="white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">（3）脑血管疾病患者，如脑栓塞、脑出血、脑肿瘤等病人；</span><br/></p><p style="white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">（4）呼吸系统疾病患者，如肺气肿、肺心病等病人；</span><br/></p><p style="margin-top: 15px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501928946255694.png" title="1501928946255694.png" alt="分隔线.png"/></span></p><p style="margin-top: 25px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502178178127296.png" title="1502178178127296.png" alt="纯正温泉1.png"/></p><p style="margin-top: 20px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502174088109502.png" title="1502174088109502.png" alt="1.png"/></p><p style="margin-top: -20px; white-space: normal;"><span style="font-size: 15px; font-weight: bold; color: rgb(146, 146, 146); font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">&nbsp; &nbsp; &nbsp; &nbsp; 纯正温泉</span></p><p style="margin-top: 13px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; font-weight: bold; color: rgb(119, 119, 119);">水温39℃，我在御温泉<br/>这一刻<br/>我什么都可以想<br/>什么都可以不想<br/>……<br/>水温39℃ 我在御温泉</span><br/><br/></p><p style="margin-top: 8px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">1、露天区有近百种形式的温泉，主要品种有华兴池（中华版图）、六福汤“N”次方，高温池、香薰汤、瀑布温泉、咖啡温泉、酒池、姜汤、醋池、蜜汤、名木汤、花草泉、音波喷射泉（台湾岛池）、木桶泉（钓鱼岛池）、药足浴、忽然一泉、瓜果汤、椰奶泉、三合风吕、盐雾浴、盐池游泳池，地热带等。另有桑拿浴、蒸汽浴等服务项目。</span><br/></p><p style="margin-top: 8px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">2、露天区免费提供各种特色饮品，雪碧，可乐，六福茶，以及吸烟区免费香烟。</span><br/></p><p style="margin-top: 8px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">3、更衣室内免费提供消毒的泳衣泳裤，拖鞋，毛巾，擦毛巾、擦脚巾、牙膏、纸内裤、泳帽等。</span><br/></p><p style="margin-top: 8px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">4、休息厅</span><br/></p><p style="margin-top: 1px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">1. 一楼休息厅享受多种水果，小点心，茶类及各类软饮等；</span><br/></p><p style="margin-top: 2px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);">2. 二楼香薰屋供温泉的客人睡眠休息。</span><br/></p><p style="margin-top: 15px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501928946255694.png" title="1501928946255694.png" alt="分隔线.png"/></span></p><p style="margin-top: 20px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502174100900440.png" title="1502174100900440.png" alt="2.png"/></p><p style="margin-top: -22px; margin-bottom: 15px; white-space: normal;"><span style="font-size: 15px; font-weight: bold; color: rgb(146, 146, 146); font-family: 微软雅黑, Microsoft YaHei;">&nbsp; &nbsp; &nbsp; &nbsp; 配套设施</span></p><table width="350"><tbody><tr class="firstRow" style="height: 38px;"><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0807/1502075928134861.png" title="1502075928134861.png" alt="wifi.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);"><span style="color: rgb(119, 119, 119);">&nbsp; &nbsp;无线WIFI</span><br/></span></span></td><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502174840233361.png" title="1502174840233361.png" alt="休息厅.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);"><span style="color: rgb(119, 119, 119);">&nbsp; &nbsp;休息厅</span><br/></span></span></td></tr><tr style="height: 38px;"><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502174829115708.png" title="1502174829115708.png" alt="休息厅水果.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);"><span style="color: rgb(119, 119, 119);">&nbsp; &nbsp;休息厅免费水果/饮料/点心</span><br/></span></span></td><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0807/1502090270494908.png" title="1502090270494908.png" alt="电视.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);"><span style="color: rgb(119, 119, 119);">&nbsp; &nbsp;电视</span><br/></span></span></td></tr><tr style="height: 38px;"><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502174819104459.png" title="1502174819104459.png" alt="收银台.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);"><span style="color: rgb(119, 119, 119);">&nbsp; &nbsp;收银台</span><br/></span></span></td><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0807/1502090297472704.png" title="1502090297472704.png" alt="洗浴.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);"><span style="color: rgb(119, 119, 119);">&nbsp; 沐浴</span><br/></span></span></td></tr><tr style="height: 38px;"><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0807/1502090314992097.png" title="1502090314992097.png" alt="24小时热水.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);"><span style="color: rgb(119, 119, 119);">&nbsp; 24小时热水</span><br/></span></span></td><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0807/1502090330139293.png" title="1502090330139293.png" alt="浴巾.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);">&nbsp; 毛巾浴巾</span></span></td></tr></tbody><tbody><tr style="height: 38px;"><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0807/1502090347899794.png" title="1502090347899794.png" alt="沐浴套餐.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);"><span style="color: rgb(119, 119, 119);">&nbsp; 沐浴露洗发水</span><br/></span></span></td><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0807/1502090366860678.png" title="1502090366860678.png" alt="牙膏套装.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);">&nbsp; 洗漱用品</span></span></td></tr><tr style="height: 38px;"><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502174571804737.png" title="1502174571804737.png" alt="拖鞋.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);"><span style="color: rgb(119, 119, 119);">&nbsp; 拖鞋</span><br/></span></span></td><td style="word-break: break-all;"><span style="display: flex; align-items: center;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502175343140670.png" title="1502175343140670.png" alt="咖啡.png"/><span style="font-size: 13px; color: rgb(153, 153, 153);">&nbsp; 咖啡/饮料</span></span></td></tr></tbody></table><p style="margin-top: 15px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501928946255694.png" title="1501928946255694.png" alt="分隔线.png"/></span></p><p style="margin-top: 25px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502177909674049.png" title="1502177909674049.png" alt="温泉图片.png"/></p><p style="margin-top: 20px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502177948167221.png" title="1502177948167221.png" alt="1.png"/></p><p style="margin-top: -22px; margin-bottom: 15px; white-space: normal;"><span style="font-size: 15px; font-weight: bold; color: rgb(146, 146, 146); font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">&nbsp; &nbsp; &nbsp; &nbsp; 温泉大堂</span></p><p style="margin-top: 13px; white-space: normal;"><span style="font-size: 13px; color: rgb(119, 119, 119);">注：图片仅供参考!</span><br/></p><p style="margin-top: 13px; white-space: normal;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502178924118604.jpg" title="1502178924118604.jpg" alt="1.jpg"/></span></p><p style="margin-top: 13px; white-space: normal;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502178952354581.jpg" title="1502178952354581.jpg" alt="2.jpg"/></span></p><p style="margin-top: 20px; white-space: normal;"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502177969557003.png" title="1502177969557003.png" alt="2.png"/></p><p style="margin-top: -22px; margin-bottom: 15px; white-space: normal;"><span style="font-size: 15px; font-weight: bold; color: rgb(146, 146, 146); font-family: 微软雅黑, &#39;Microsoft YaHei&#39;;">&nbsp; &nbsp; &nbsp; &nbsp; 温泉图片</span></p><p style="margin-top: 13px; white-space: normal;"><span style="font-size: 13px; color: rgb(119, 119, 119);">注：图片仅供参考!</span></p><p style="margin-top: 13px; white-space: normal;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502179415296230.jpg" title="1502179415296230.jpg" alt="3.jpg"/></span></p><p style="margin-top: 13px; white-space: normal;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502179433771215.jpg" title="1502179433771215.jpg" alt="4.jpg"/></span></p><p style="margin-top: 13px; white-space: normal;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0808/1502179447144586.jpg" title="1502179447144586.jpg" alt="5.jpg"/></span></p><p style="margin-top: 25px; white-space: normal; line-height: 1.5em;"><span style="font-size: 13px; color: rgb(119, 119, 119);"><img src="http://www.00800.com.cn/cnhs/wqproject/data/upload/2017/0805/1501928946255694.png" title="1501928946255694.png" alt="分隔线.png"/></span></p><p><br/></p>',
      myConfig: {
        // 编辑器不自动被内容撑高
        autoHeightEnabled: false,
        // 初始容器高度
        initialFrameHeight: 600,
        // 初始容器宽度
        initialFrameWidth: "100%",
        // 上传文件接口（这个地址是我为了方便各位体验文件上传功能搭建的临时接口，请勿在生产环境使用！！！）
        // serverUrl: "http://192.168.101.115:8080/php/controller.php",
        serverUrl: "http://192.168.101.115:8089/editor",
        // UEditor 资源文件的存放路径，如果你使用的是 vue-cli 生成的项目，通常不需要设置该选项，vue-ueditor-wrap 会自动处理常见的情况，如果需要特殊配置，参考下方的常见问题2
        header: [
          {
            token: "aaa"
          }
        ]
      }
    };
  },
  created() {
      this.$store.commit("SET_FORM", { shopDetailRenderHtml: this.msg });
  },
  watch: {
    msg: {
      handler: function(val) {
        this.$store.commit("SET_FORM", { shopDetailRenderHtml: val });
      }
    }
  },
  methods: {
    ready(editorInstance) {
      console.log(`编辑器实例${editorInstance.key}: `, editorInstance);
      let _this = this
      // alert(this.$.getters.getToken)
      console.log(this.$ls.get('Access-Token'))
      console.log(this.$ls.get('company'))
      console.log('=================')
      // console.log(_this.$store.getters.getToken())
      editorInstance.ready(function() {
        editorInstance.execCommand("serverparam", {
          token:_this.$ls.get('Access-Token'),
          company:_this.$ls.get('company').id
        });
      });
    
      console.log(editorInstance.queryCommandValue("serverparam"));
    },
    handleUpdateGoodDesc(){
      updateGoodDesc(this.goodId,{
        desc:this.msg
      }).then(res=>{
        console.log(res)
      })
    }
  }
};
</script>

<style>
</style>